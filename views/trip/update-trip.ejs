<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/trip-details.css" />
    <title>Document</title>
</head>
<body class="add-country-page">

      <%- include('../partials/navbar') %>
     <div class="container">
        <h1>Trip Update</h1>
        <p class="subtitle">Edit the trip details below and save your changes.</p>

        <% const selectedTransportation = foundTrip.transportation%>
        <% const selectedAccommodation = foundTrip.accommodation%>
        <form action="/trip/<%= foundTrip._id%>/update?_method=PUT" method="post">

            <div class="card">
                <div class="field">
                    <span class="label">Trip Name:</span>
                    <div class="value">
                    <input value="<%=foundTrip.tripName%>" type="text" name="tripName" id="tripName">
                    </div>
                </div>

                <div class="field">
                    <span class="label">Countries:</span>
                    <div class="value">
                        <select multiple name="country" id="country" required>
                            <% allCountries.forEach((oneCountry) => { %>
                                <% for( let i = 0; i < foundTrip.country.length; i++ ) { %>
                                    <% if (foundTrip.country[i].name === oneCountry.name) { %>
                                        <option selected value="<%= oneCountry._id %>">
                                            <%= oneCountry.name %>                                            
                                        </option>
                                    <% } %>
                                <% } %>>                                
                        <% }) %>
                        </select>
                    </div>
                </div>

                <div class="field">
                    <span class="label">Transportation:</span>
                    <div class="value">
                        <select name="transportation" required>
                            <option value="select">--Select a transport option--</option>
                            <option value="Car" <%= selectedTransportation === "Car" && "selected" %>>Car</option>
                            <option value="plane" <%= selectedTransportation === "plane" && "selected" %>>Plane</option>
                            <option value="Train" <%= selectedTransportation === "Train" && "selected" %>>Train</option>
                            <option value="Bus" <%= selectedTransportation === "Bus" && "selected" %>>Bus</option>
                            <option value="Other" <%= selectedTransportation === "Other" && "selected" %>>Other</option>
                        </select>
                    </div>
                </div>
                <div class="field">
                    <span class="label">Accommodation:</span>
                    <div class="value">
                        <select name="accommodation" required>
                            <option value="select">--Select accommodation--</option>
                            <option value="Hotel" <%= selectedAccommodation === "Hotel" && "selected" %>>Hotel</option>
                            <option value="Hostel" <%= selectedAccommodation === "Hostel" && "selected" %>>Hostel</option>
                            <option value="Camping" <%= selectedAccommodation === "Camping" && "selected" %>>Camping</option>
                            <option value="Other" <%= selectedAccommodation === "Other" && "selected" %>>Other</option>
                        </select>
                    </div>
                </div>   

            <button type="submit" class="btn btn-edit">Update Trip</button>
            </div>
        </form>
    </div>
</body>
</html>